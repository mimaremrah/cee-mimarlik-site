<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proje Detay - CEE Mimarlƒ±k</title>
    
    <!-- SEO Fallback Meta Tags -->
    <meta name="description" content="CEE Mimarlƒ±k projesi detaylarƒ± - Modern mimarlƒ±k anlayƒ±≈üƒ±yla tasarlanan villa, apartman ve ticari yapƒ±lar.">
    <meta name="keywords" content="mimarlƒ±k projesi, villa tasarƒ±mƒ±, modern mimari, CEE Mimarlƒ±k">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Proje Detay - CEE Mimarlƒ±k">
    <meta property="og:description" content="CEE Mimarlƒ±k projesi detaylarƒ±">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://www.ceemimarlik.com/og-image.jpg">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #f8f9fa;
            line-height: 1.6;
        }

        /* HEADER */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: white;
            color: #667eea;
        }

        /* MAIN CONTENT */
        .project-detail {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        /* HERO IMAGE */
        .project-hero {
            width: 100%;
            height: 500px;
            background-size: cover;
            background-position: center;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            margin-bottom: 40px;
        }

        /* INFO SECTION */
        .project-info {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.06);
            margin-bottom: 30px;
        }

        .project-title {
            font-size: 36px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 20px;
        }

        .project-meta {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .meta-label {
            font-weight: 600;
            color: #667eea;
        }

        .meta-value {
            color: #6b7280;
        }

        .project-description {
            font-size: 16px;
            color: #4b5563;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .project-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .tag {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
        }

        /* SPECS */
        .project-specs {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.06);
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .specs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .spec-item {
            padding: 20px;
            background: #f9fafb;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .spec-label {
            font-size: 12px;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }

        .spec-value {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
        }

        /* GALLERY */
        .project-gallery {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.06);
            margin-bottom: 30px;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .gallery-item {
            position: relative;
            height: 250px;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .gallery-item:hover {
            transform: scale(1.05);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* DRAWINGS */
        .project-drawings {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.06);
        }

        .drawings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
        }

        .drawing-item {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
        }

        .drawing-item:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .drawing-image {
            width: 100%;
            height: 300px;
            object-fit: contain;
            background: #f9fafb;
            padding: 20px;
        }

        .drawing-title {
            padding: 15px;
            background: #f9fafb;
            font-weight: 600;
            color: #1f2937;
            text-align: center;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .project-hero {
                height: 300px;
            }

            .project-title {
                font-size: 28px;
            }

            .project-info,
            .project-specs,
            .project-gallery,
            .project-drawings {
                padding: 20px;
            }

            .gallery-grid,
            .drawings-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
<!-- Google Analytics GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX');
</script>
</head>
<body>
    <!-- HEADER -->
    <div class="header">
        <div class="container">
            <div class="logo">üè¢ CEE Mƒ∞MARLIK</div>
            <a href="index.html" class="back-btn">‚Üê Ana Sayfaya D√∂n</a>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="project-detail">
        <!-- HERO IMAGE -->
        <div class="project-hero" id="projectHero" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI1MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyMDAiIGhlaWdodD0iNTAwIiBmaWxsPSIjZTVlN2ViIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzljYTNhZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPsSwbWFnZSBIZXJlPC90ZXh0Pjwvc3ZnPg==')"></div>

        <!-- PROJECT INFO -->
        <div class="project-info">
            <h1 class="project-title" id="projectTitle">Villa Projesi</h1>
            
            <div class="project-meta">
                <div class="meta-item">
                    <span class="meta-label">üìç Konum:</span>
                    <span class="meta-value" id="projectLocation">ƒ∞stanbul, T√ºrkiye</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">üìÖ Yƒ±l:</span>
                    <span class="meta-value" id="projectYear">2024</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">üìê Alan:</span>
                    <span class="meta-value" id="projectArea">350 m¬≤</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">üë§ M√º≈üteri:</span>
                    <span class="meta-value" id="projectClient">√ñzel</span>
                </div>
            </div>

            <div class="project-description" id="projectDescription">
                Modern mimari anlayƒ±≈üla tasarlanan bu villa projesi, doƒüa ile i√ß i√ße ya≈üam konseptini merkeze alƒ±r. 
                Geni≈ü cam y√ºzeyler sayesinde maksimum doƒüal ƒ±≈üƒ±k alƒ±nƒ±rken, s√ºrd√ºr√ºlebilir malzemeler kullanƒ±larak 
                √ßevre dostu bir yakla≈üƒ±m benimsenmi≈ütir.
            </div>

            <div class="project-tags" id="projectTags">
                <span class="tag">Villa</span>
                <span class="tag">Modern</span>
                <span class="tag">S√ºrd√ºr√ºlebilir</span>
            </div>
        </div>

        <!-- TECHNICAL SPECS -->
        <div class="project-specs">
            <h2 class="section-title">üìã Teknik √ñzellikler</h2>
            <div class="specs-grid">
                <div class="spec-item">
                    <div class="spec-label">ƒ∞n≈üaat Alanƒ±</div>
                    <div class="spec-value" id="specArea">350 m¬≤</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">Kat Sayƒ±sƒ±</div>
                    <div class="spec-value" id="specFloors">2 Kat</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">Oda Sayƒ±sƒ±</div>
                    <div class="spec-value" id="specRooms">4+1</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">Banyo</div>
                    <div class="spec-value" id="specBathrooms">3</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">Arsa Alanƒ±</div>
                    <div class="spec-value" id="specLand">600 m¬≤</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">Otopark</div>
                    <div class="spec-value" id="specParking">2 Ara√ß</div>
                </div>
            </div>
        </div>

        <!-- GALLERY -->
        <div class="project-gallery">
            <h2 class="section-title">üñºÔ∏è G√∂rsel Galeri</h2>
            <div class="gallery-grid" id="projectGallery">
                <!-- G√∂rseller dinamik y√ºklenecek -->
            </div>
        </div>

        <!-- DRAWINGS/PLANS -->
        <div class="project-drawings">
            <h2 class="section-title">üìê √áizimler & Planlar</h2>
            <div class="drawings-grid" id="projectDrawings">
                <!-- √áizimler dinamik y√ºklenecek -->
            </div>
        </div>
    </div>

    <script>
        // URL'den proje ID'sini al
        const urlParams = new URLSearchParams(window.location.search);
        const projectId = urlParams.get('id');

        // LocalStorage'dan proje verilerini y√ºkle
        function loadProjectData() {
            try {
                const projects = JSON.parse(localStorage.getItem('cee_projects')) || [];
                const project = projects.find(p => p.id === projectId);

                if (!project) {
                    alert('Proje bulunamadƒ±!');
                    window.location.href = 'index.html';
                    return;
                }

                // Temel bilgiler
                document.title = `${project.title} - CEE Mimarlƒ±k`;
                document.getElementById('projectTitle').textContent = project.title;
                document.getElementById('projectDescription').textContent = project.description || project.title;

                // Meta bilgiler
                if (project.details) {
                    document.getElementById('projectLocation').textContent = project.details.location || 'ƒ∞stanbul, T√ºrkiye';
                    document.getElementById('projectYear').textContent = project.details.year || '2024';
                    document.getElementById('projectArea').textContent = project.details.area || '-';
                    document.getElementById('projectClient').textContent = project.details.client || '√ñzel';
                }

                // Hero image
                if (project.media && project.media[0]) {
                    document.getElementById('projectHero').style.backgroundImage = `url(${project.media[0].url})`;
                }

                // Tags
                if (project.tags && project.tags.length > 0) {
                    const tagsContainer = document.getElementById('projectTags');
                    tagsContainer.innerHTML = '';
                    project.tags.forEach(tag => {
                        const tagEl = document.createElement('span');
                        tagEl.className = 'tag';
                        tagEl.textContent = tag;
                        tagsContainer.appendChild(tagEl);
                    });
                }

                // Technical specs
                if (project.specs) {
                    document.getElementById('specArea').textContent = project.specs.area || '-';
                    document.getElementById('specFloors').textContent = project.specs.floors || '-';
                    document.getElementById('specRooms').textContent = project.specs.rooms || '-';
                    document.getElementById('specBathrooms').textContent = project.specs.bathrooms || '-';
                    document.getElementById('specLand').textContent = project.specs.land || '-';
                    document.getElementById('specParking').textContent = project.specs.parking || '-';
                }

                // Gallery
                if (project.media && project.media.length > 1) {
                    const galleryContainer = document.getElementById('projectGallery');
                    galleryContainer.innerHTML = '';
                    
                    project.media.slice(1).forEach(media => {
                        const item = document.createElement('div');
                        item.className = 'gallery-item';
                        item.innerHTML = `<img src="${media.url}" alt="${project.title}">`;
                        item.onclick = () => window.open(media.url, '_blank');
                        galleryContainer.appendChild(item);
                    });
                }

                // Drawings
                if (project.drawings && project.drawings.length > 0) {
                    const drawingsContainer = document.getElementById('projectDrawings');
                    drawingsContainer.innerHTML = '';
                    
                    project.drawings.forEach(drawing => {
                        const item = document.createElement('div');
                        item.className = 'drawing-item';
                        item.innerHTML = `
                            <img src="${drawing.url}" alt="${drawing.title}" class="drawing-image">
                            <div class="drawing-title">${drawing.title}</div>
                        `;
                        drawingsContainer.appendChild(item);
                    });
                } else {
                    document.querySelector('.project-drawings').style.display = 'none';
                }

            } catch (error) {
                console.error('Proje y√ºklenirken hata:', error);
                alert('Proje y√ºklenirken bir hata olu≈ütu!');
                window.location.href = 'index.html';
            }
        }

        // Sayfa y√ºklendiƒüinde √ßalƒ±≈ütƒ±r
        document.addEventListener('DOMContentLoaded', loadProjectData);
    </script>

    <!-- ============================================ -->
    <!-- FIREBASE CONFIG - ZORUNLU -->
    <!-- ============================================ -->
    <script type="module" src="firebase-config.js"></script>
    
    <!-- ============================================ -->
    <!-- Dƒ∞NAMƒ∞K SEO - ZORUNLU -->
    <!-- ============================================ -->
    <script type="module" src="dynamic-seo.js"></script>
    
    <!-- ============================================ -->
    <!-- FIRESTORE ENTEGRASYONU - PROJE DETAY Y√úKLE -->
    <!-- ============================================ -->
    <script type="module">
    import { doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
    
    // URL'den proje ID'sini al
    const params = new URLSearchParams(window.location.search);
    const projectId = params.get('id');
    
    if (!projectId) {
        alert('Ge√ßersiz proje!');
        window.location.href = 'index.html';
    }
    
    // Firebase hazƒ±r olmasƒ±nƒ± bekle
    async function waitForFirebase() {
        let attempts = 0;
        while (!window.firebaseDB && attempts < 50) {
            await new Promise(resolve => setTimeout(resolve, 100));
            attempts++;
        }
        
        if (!window.firebaseDB) {
            console.error('‚ùå Firebase ba≈ülatƒ±lamadƒ±!');
            alert('Firebase baƒülantƒ±sƒ± kurulamadƒ±!');
            return false;
        }
        return true;
    }
    
    // Projeyi Firestore'dan y√ºkle
    async function loadProjectFromFirestore() {
        console.log('üî• Proje y√ºkleniyor:', projectId);
        
        // Firebase'in hazƒ±r olmasƒ±nƒ± bekle
        const firebaseReady = await waitForFirebase();
        if (!firebaseReady) {
            window.location.href = 'index.html';
            return;
        }
        
        try {
            const docRef = doc(window.firebaseDB, 'projects', projectId);
            const docSnap = await getDoc(docRef);
            
            if (docSnap.exists()) {
                const project = { id: docSnap.id, ...docSnap.data() };
                console.log('‚úÖ Proje bulundu:', project.title);
                
                // ============================================
                // Dƒ∞NAMƒ∞K SEO - ZORUNLU √áAƒûRI
                // ============================================
                if (typeof window.updateSEOMetaTags === 'function') {
                    window.updateSEOMetaTags(project);
                    console.log('‚úÖ SEO meta taglarƒ± g√ºncellendi');
                } else {
                    console.warn('‚ö†Ô∏è updateSEOMetaTags fonksiyonu bulunamadƒ±!');
                }
                
                // Projeyi render et
                renderProject(project);
            } else {
                alert('Proje bulunamadƒ±!');
                window.location.href = 'index.html';
            }
        } catch (error) {
            console.error('‚ùå Firestore hatasƒ±:', error);
            alert('Proje y√ºklenirken bir hata olu≈ütu!');
            window.location.href = 'index.html';
        }
    }
    
    // Projeyi sayfada g√∂ster
    function renderProject(project) {
        // Title
        document.title = project.title + ' | CEE Mimarlƒ±k';
        
        // Hero image
        const heroSection = document.querySelector('.project-hero');
        if (heroSection) {
            heroSection.style.backgroundImage = `url('${project.thumbnail || project.images[0]}')`;
        }
        
        // Ba≈ülƒ±k
        const titleEl = document.querySelector('.project-title');
        if (titleEl) titleEl.textContent = project.title;
        
        // A√ßƒ±klama
        const descEl = document.querySelector('.project-description');
        if (descEl) descEl.textContent = project.description;
        
        // Meta bilgileri (konum, yƒ±l, alan)
        const metaEl = document.querySelector('.project-meta');
        if (metaEl) {
            let metaHTML = '';
            if (project.details?.location) {
                metaHTML += `
                    <div class="meta-item">
                        <span class="meta-icon">üìç</span>
                        <span class="meta-label">Konum:</span>
                        <span class="meta-value">${project.details.location}</span>
                    </div>
                `;
            }
            if (project.details?.year) {
                metaHTML += `
                    <div class="meta-item">
                        <span class="meta-icon">üìÖ</span>
                        <span class="meta-label">Yƒ±l:</span>
                        <span class="meta-value">${project.details.year}</span>
                    </div>
                `;
            }
            if (project.details?.area) {
                metaHTML += `
                    <div class="meta-item">
                        <span class="meta-icon">üìê</span>
                        <span class="meta-label">Alan:</span>
                        <span class="meta-value">${project.details.area}</span>
                    </div>
                `;
            }
            metaEl.innerHTML = metaHTML;
        }
        
        // G√∂rseller galerisi
        const galleryEl = document.querySelector('.gallery-grid');
        if (galleryEl && project.images && project.images.length > 0) {
            let galleryHTML = '';
            project.images.forEach((url) => {
                galleryHTML += `
                    <div class="gallery-item" onclick="window.open('${url}', '_blank')" style="cursor:pointer;">
                        <img src="${url}" loading="lazy" alt="${project.title}">
                    </div>
                `;
            });
            galleryEl.innerHTML = galleryHTML;
        }
        
        // Teknik √∂zellikler
        if (project.specs) {
            const specsContainer = document.querySelector('.project-specs');
            if (specsContainer) {
                let specsHTML = '';
                for (const [key, value] of Object.entries(project.specs)) {
                    specsHTML += `
                        <div class="spec-item">
                            <strong>${key}:</strong> ${value}
                        </div>
                    `;
                }
                if (specsHTML) {
                    specsContainer.innerHTML = specsHTML;
                } else {
                    specsContainer.style.display = 'none';
                }
            }
        }
        
        console.log('‚úÖ Proje render edildi');
    }
    
    // Sayfa y√ºklendiƒüinde √ßalƒ±≈ütƒ±r
    window.addEventListener('DOMContentLoaded', loadProjectFromFirestore);
    </script>

<!-- Lazy Loading -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const images = document.querySelectorAll('img[data-src]');
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.removeAttribute('data-src');
                observer.unobserve(img);
            }
        });
    });
    images.forEach(img => imageObserver.observe(img));
});
</script>
</body>
</html>

/* ====================================================================
   CEE MİMARLIK - CROSS-BROWSER UYUMLULUK DÜZELTMELERİ
   Tüm modern ve eski tarayıcılarda tutarlı görünüm sağlar
   Desteklenen: Chrome, Firefox, Safari, Edge, Opera, IE11+
   ==================================================================== */

/* =============================================
   1. CSS CUSTOM PROPERTIES FALLBACK (IE11)
   IE11 CSS değişkenlerini desteklemez
   ============================================= */

/* IE11 için sabit renkler - CSS değişkenleri yerine */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
    :root {
        /* IE11 değişkenleri görmezden gelir, sabit değerler kullanır */
    }
    
    body {
        background-color: #fafafa !important;
        color: #2c2c2c !important;
    }
    
    body.dark-mode {
        background-color: #1a1a1a !important;
        color: #e0e0e0 !important;
    }
    
    header {
        background-color: rgba(255, 255, 255, 0.97) !important;
    }
    
    body.dark-mode header {
        background-color: rgba(20, 20, 20, 0.97) !important;
    }
    
    .section-title .accent {
        color: #4a4a4a !important;
    }
    
    nav a:hover,
    nav a.active {
        color: #4a4a4a !important;
    }
    
    .hero-cta,
    .team-cta-btn,
    .directions-btn {
        background-color: #4a4a4a !important;
    }
    
    .filter-btn.active {
        background-color: #4a4a4a !important;
        color: #ffffff !important;
    }
    
    .service-icon-v2,
    .ref-icon,
    .contact-icon-circle {
        background-color: #4a4a4a !important;
    }
    
    .ai-assistant-header,
    .ai-panel-header {
        background-color: #4a4a4a !important;
    }
    
    /* IE11 input placeholder */
    :-ms-input-placeholder {
        color: #999 !important;
        opacity: 1 !important;
    }
}

/* =============================================
   2. BACKDROP-FILTER FALLBACK
   Safari, IE ve eski tarayıcılar için
   ============================================= */

/* backdrop-filter desteklemeyen tarayıcılar için */
@supports not (backdrop-filter: blur(10px)) {
    header {
        background: rgba(255, 255, 255, 0.98) !important;
    }
    
    body.dark-mode header {
        background: rgba(20, 20, 20, 0.98) !important;
    }
    
    .hero-nav {
        background: rgba(0, 0, 0, 0.6) !important;
    }
    
    .hero-cta {
        background: rgba(74, 74, 74, 0.95) !important;
    }
    
    .toast {
        background: rgba(255, 255, 255, 0.98) !important;
    }
    
    body.dark-mode .toast {
        background: rgba(44, 44, 44, 0.98) !important;
    }
    
    .dwg-tools-container {
        background: rgba(255, 255, 255, 0.98) !important;
    }
    
    body.dark-mode .dwg-tools-container {
        background: rgba(44, 44, 44, 0.98) !important;
    }
    
    .stats-container {
        background: rgba(255, 255, 255, 0.95) !important;
    }
    
    body.dark-mode .stats-container {
        background: rgba(44, 44, 44, 0.95) !important;
    }
}

/* =============================================
   3. FLEXBOX GAP FALLBACK
   Eski Safari ve tarayıcılar için
   ============================================= */

/* gap desteklemeyen flexbox için margin kullan */
@supports not (gap: 10px) {
    .flex, [class*="flex"],
    nav,
    .header-actions,
    .social-icons,
    .quick-topics,
    .hero-indicators,
    .logo-top,
    .ai-assistant-input {
        margin: -5px;
    }
    
    .flex > *, [class*="flex"] > *,
    nav > *,
    .header-actions > *,
    .social-icons > *,
    .quick-topics > *,
    .hero-indicators > *,
    .logo-top > *,
    .ai-assistant-input > * {
        margin: 5px;
    }
    
    nav {
        margin: -20px;
    }
    
    nav > * {
        margin: 20px;
    }
}

/* =============================================
   4. OBJECT-FIT FALLBACK (IE11)
   IE11 object-fit desteklemez
   ============================================= */

@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
    .hero-slide img,
    .project-item img,
    .team-member img {
        width: 100%;
        height: auto;
        min-height: 100%;
        position: absolute;
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
    }
    
    .hero-slide,
    .project-item,
    .team-member {
        position: relative;
        overflow: hidden;
    }
}

/* =============================================
   5. GRADIENT PREFIXES
   Tüm tarayıcılarda gradient desteği
   ============================================= */

/* Metalik gradient - tüm tarayıcılar */
.hero-cta,
.team-cta-btn,
.directions-btn {
    background: #808080; /* Fallback */
    background: -webkit-linear-gradient(top, #d0d0d0 0%, #b0b0b0 20%, #808080 50%, #505050 80%, #2a2a2a 100%);
    background: -moz-linear-gradient(top, #d0d0d0 0%, #b0b0b0 20%, #808080 50%, #505050 80%, #2a2a2a 100%);
    background: -o-linear-gradient(top, #d0d0d0 0%, #b0b0b0 20%, #808080 50%, #505050 80%, #2a2a2a 100%);
    background: linear-gradient(180deg, #d0d0d0 0%, #b0b0b0 20%, #808080 50%, #505050 80%, #2a2a2a 100%);
}

.service-icon-v2,
.ref-icon,
.contact-icon-circle {
    background: #808080; /* Fallback */
    background: -webkit-linear-gradient(top, #d0d0d0 0%, #b0b0b0 20%, #808080 50%, #505050 80%, #2a2a2a 100%);
    background: -moz-linear-gradient(top, #d0d0d0 0%, #b0b0b0 20%, #808080 50%, #505050 80%, #2a2a2a 100%);
    background: -o-linear-gradient(top, #d0d0d0 0%, #b0b0b0 20%, #808080 50%, #505050 80%, #2a2a2a 100%);
    background: linear-gradient(180deg, #d0d0d0 0%, #b0b0b0 20%, #808080 50%, #505050 80%, #2a2a2a 100%);
}

.ai-assistant-header,
.ai-panel-header {
    background: #606060; /* Fallback */
    background: -webkit-linear-gradient(top, #b0b0b0 0%, #606060 50%, #1a1a1a 100%);
    background: -moz-linear-gradient(top, #b0b0b0 0%, #606060 50%, #1a1a1a 100%);
    background: -o-linear-gradient(top, #b0b0b0 0%, #606060 50%, #1a1a1a 100%);
    background: linear-gradient(180deg, #b0b0b0 0%, #606060 50%, #1a1a1a 100%);
}

.convert-btn,
.download-btn {
    background: #667eea; /* Fallback */
    background: -webkit-linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    background: -moz-linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    background: -o-linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* =============================================
   6. TRANSFORM PREFIXES
   Tüm tarayıcılarda transform desteği
   ============================================= */

.hero-content {
    -webkit-transform: translate(-50%, -50%);
    -moz-transform: translate(-50%, -50%);
    -ms-transform: translate(-50%, -50%);
    -o-transform: translate(-50%, -50%);
    transform: translate(-50%, -50%);
}

.hero-nav {
    -webkit-transform: translateY(-50%);
    -moz-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -o-transform: translateY(-50%);
    transform: translateY(-50%);
}

.hero-nav:hover {
    -webkit-transform: translateY(-50%) scale(1.1);
    -moz-transform: translateY(-50%) scale(1.1);
    -ms-transform: translateY(-50%) scale(1.1);
    -o-transform: translateY(-50%) scale(1.1);
    transform: translateY(-50%) scale(1.1);
}

button:hover,
.btn:hover,
.btn-primary:hover,
.hero-cta:hover,
.team-cta-btn:hover,
.directions-btn:hover {
    -webkit-transform: translateY(-2px);
    -moz-transform: translateY(-2px);
    -ms-transform: translateY(-2px);
    -o-transform: translateY(-2px);
    transform: translateY(-2px);
}

.project-item:hover,
.team-member:hover {
    -webkit-transform: translateY(-8px);
    -moz-transform: translateY(-8px);
    -ms-transform: translateY(-8px);
    -o-transform: translateY(-8px);
    transform: translateY(-8px);
}

/* =============================================
   7. TRANSITION PREFIXES
   Tüm tarayıcılarda transition desteği
   ============================================= */

button, .btn, .btn-primary, .btn-secondary, a, input, textarea,
.hero-cta, .team-cta-btn, .directions-btn,
.project-item, .team-member,
.social-link, .filter-btn,
nav a, .logo-container, .site-logo {
    -webkit-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    -moz-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    -o-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* =============================================
   8. ANIMATION PREFIXES
   Tüm tarayıcılarda animation desteği
   ============================================= */

@-webkit-keyframes fadeInUp {
    from {
        opacity: 0;
        -webkit-transform: translateY(30px);
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        -webkit-transform: translateY(0);
        transform: translateY(0);
    }
}

@-moz-keyframes fadeInUp {
    from {
        opacity: 0;
        -moz-transform: translateY(30px);
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        -moz-transform: translateY(0);
        transform: translateY(0);
    }
}

@-o-keyframes fadeInUp {
    from {
        opacity: 0;
        -o-transform: translateY(30px);
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        -o-transform: translateY(0);
        transform: translateY(0);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        -webkit-transform: translateY(30px);
        -moz-transform: translateY(30px);
        -o-transform: translateY(30px);
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        -webkit-transform: translateY(0);
        -moz-transform: translateY(0);
        -o-transform: translateY(0);
        transform: translateY(0);
    }
}

@-webkit-keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@-moz-keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@-o-keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@-webkit-keyframes slideIn {
    from {
        opacity: 0;
        -webkit-transform: translateX(-20px);
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        -webkit-transform: translateX(0);
        transform: translateX(0);
    }
}

@-moz-keyframes slideIn {
    from {
        opacity: 0;
        -moz-transform: translateX(-20px);
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        -moz-transform: translateX(0);
        transform: translateX(0);
    }
}

@keyframes slideIn {
    from {
        opacity: 0;
        -webkit-transform: translateX(-20px);
        -moz-transform: translateX(-20px);
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        -webkit-transform: translateX(0);
        -moz-transform: translateX(0);
        transform: translateX(0);
    }
}

@-webkit-keyframes typing {
    0%, 60%, 100% { -webkit-transform: translateY(0); transform: translateY(0); }
    30% { -webkit-transform: translateY(-10px); transform: translateY(-10px); }
}

@-moz-keyframes typing {
    0%, 60%, 100% { -moz-transform: translateY(0); transform: translateY(0); }
    30% { -moz-transform: translateY(-10px); transform: translateY(-10px); }
}

@keyframes typing {
    0%, 60%, 100% {
        -webkit-transform: translateY(0);
        -moz-transform: translateY(0);
        transform: translateY(0);
    }
    30% {
        -webkit-transform: translateY(-10px);
        -moz-transform: translateY(-10px);
        transform: translateY(-10px);
    }
}

@-webkit-keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

@-moz-keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

@keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

section {
    -webkit-animation: fadeInUp 0.8s ease-out;
    -moz-animation: fadeInUp 0.8s ease-out;
    -o-animation: fadeInUp 0.8s ease-out;
    animation: fadeInUp 0.8s ease-out;
}

/* =============================================
   9. FLEXBOX CROSS-BROWSER
   Eski tarayıcılar için flexbox desteği
   ============================================= */

.flex, [class*="flex"],
nav,
.header-content,
.header-actions,
.social-icons,
.logo-container,
.logo-top,
.ai-assistant-panel,
.ai-assistant-input,
.ai-msg,
.user-msg,
.msg-avatar,
.hero-nav,
.quick-topics,
.contact-info {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
}

.ai-assistant-panel {
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
}

.logo-container {
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    -webkit-box-align: start;
    -webkit-align-items: flex-start;
    -ms-flex-align: start;
    align-items: flex-start;
}

.header-content {
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -ms-flex-pack: justify;
    justify-content: space-between;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
}

.hero-nav,
.msg-avatar,
.ai-assistant-input button {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
}

/* =============================================
   10. GRID CROSS-BROWSER
   CSS Grid için fallback
   ============================================= */

.quick-topics,
.format-options,
.version-options,
.stats-container {
    display: -ms-grid;
    display: grid;
}

/* IE11 için grid fallback - flexbox kullan */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
    .quick-topics,
    .format-options,
    .version-options,
    .stats-container {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
    }
    
    .quick-topics > *,
    .format-options > *,
    .version-options > * {
        -webkit-box-flex: 0;
        -ms-flex: 0 0 calc(50% - 10px);
        flex: 0 0 calc(50% - 10px);
        margin: 5px;
    }
    
    .stats-container > * {
        -webkit-box-flex: 1;
        -ms-flex: 1 1 200px;
        flex: 1 1 200px;
    }
}

/* =============================================
   11. SCROLL BEHAVIOR FALLBACK
   Eski tarayıcılar için smooth scroll
   ============================================= */

@supports not (scroll-behavior: smooth) {
    html {
        /* JavaScript ile smooth scroll kullanılacak */
    }
}

/* =============================================
   12. FILTER FALLBACK
   IE11 ve eski tarayıcılar için
   ============================================= */

@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
    .site-logo {
        /* IE11'de filter çalışmaz, alternatif kullan */
        border: none;
    }
    
    body.dark-mode .hero-slide img {
        /* brightness filter yerine opacity */
        opacity: 0.85;
    }
}

/* =============================================
   13. APPEARANCE RESET
   Form elemanları için cross-browser
   ============================================= */

input, button, select, textarea {
    -webkit-appearance: none;
    -moz-appearance: none;
    -ms-appearance: none;
    appearance: none;
}

/* Select ok işareti için özel stil */
select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 30px;
}

/* =============================================
   14. USER-SELECT CROSS-BROWSER
   ============================================= */

.no-select,
button,
.hero-nav,
.menu-toggle {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* =============================================
   15. BOX-SIZING NORMALIZE
   ============================================= */

*, *::before, *::after {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

/* =============================================
   16. PLACEHOLDER STYLES
   Tüm tarayıcılarda placeholder rengi
   ============================================= */

::-webkit-input-placeholder {
    color: #999;
    opacity: 1;
}

::-moz-placeholder {
    color: #999;
    opacity: 1;
}

:-ms-input-placeholder {
    color: #999;
    opacity: 1;
}

::-ms-input-placeholder {
    color: #999;
    opacity: 1;
}

::placeholder {
    color: #999;
    opacity: 1;
}

/* =============================================
   17. SCROLLBAR STYLES
   Firefox ve Webkit tarayıcılar için
   ============================================= */

/* Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: #4a4a4a transparent;
}

/* Webkit (Chrome, Safari, Edge) */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: #4a4a4a;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #2c2c2c;
}

/* =============================================
   18. SELECTION STYLES
   ============================================= */

::-moz-selection {
    background: #4a4a4a;
    color: white;
}

::selection {
    background: #4a4a4a;
    color: white;
}

/* =============================================
   19. FOCUS STYLES
   Accessibility için focus göstergesi
   ============================================= */

/* Eski tarayıcılar için focus */
:focus {
    outline: none;
}

/* Modern tarayıcılar için focus-visible */
:focus-visible {
    outline: 2px solid #4a4a4a;
    outline-offset: 2px;
}

/* focus-visible desteklemeyen tarayıcılar için */
@supports not selector(:focus-visible) {
    :focus {
        outline: 2px solid #4a4a4a;
        outline-offset: 2px;
    }
    
    button:focus,
    a:focus,
    input:focus {
        outline: 2px solid #4a4a4a;
        outline-offset: 2px;
    }
}

/* =============================================
   20. SAFARI SPECIFIC FIXES
   ============================================= */

/* Safari iOS scroll fix */
@supports (-webkit-touch-callout: none) {
    body {
        -webkit-overflow-scrolling: touch;
    }
    
    .ai-assistant-messages,
    .modal-content {
        -webkit-overflow-scrolling: touch;
    }
}

/* =============================================
   21. FIREFOX SPECIFIC FIXES
   ============================================= */

@-moz-document url-prefix() {
    /* Firefox'ta button içindeki text hizalama */
    button {
        text-align: center;
    }
    
    /* Firefox'ta input padding */
    input[type="text"],
    input[type="email"],
    input[type="password"] {
        padding-top: 0.6em;
        padding-bottom: 0.6em;
    }
}

/* =============================================
   22. EDGE SPECIFIC FIXES
   ============================================= */

@supports (-ms-ime-align: auto) {
    /* Edge Legacy fixes */
    .hero-slide img {
        -ms-interpolation-mode: bicubic;
    }
}

/* =============================================
   23. HIGH DPI / RETINA FIXES
   ============================================= */

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .site-logo,
    img {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
    }
}

/* =============================================
   24. PRINT STYLES
   ============================================= */

@media print {
    *, *::before, *::after {
        background: white !important;
        color: black !important;
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        text-shadow: none !important;
    }
    
    header, footer, .ai-assistant-panel, .hero-nav {
        display: none !important;
    }
    
    a {
        text-decoration: underline;
    }
    
    img {
        max-width: 100% !important;
        page-break-inside: avoid;
    }
}

/* =============================================
   25. REDUCED MOTION
   Accessibility için hareket azaltma
   ============================================= */

@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        -webkit-animation-duration: 0.01ms !important;
        animation-duration: 0.01ms !important;
        -webkit-animation-iteration-count: 1 !important;
        animation-iteration-count: 1 !important;
        -webkit-transition-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* =============================================
   26. iOS SPECIFIC FIXES
   ============================================= */

/* iOS input zoom önleme */
@media screen and (max-width: 768px) {
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="password"],
    input[type="number"],
    input[type="search"],
    select,
    textarea {
        font-size: 16px !important;
    }
}

/* iOS safe area */
@supports (padding: env(safe-area-inset-top)) {
    body {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
    }
}

/* =============================================
   27. CLAMP() FALLBACK
   Eski tarayıcılar için
   ============================================= */

/* clamp() desteklemeyen tarayıcılar için */
@supports not (font-size: clamp(1rem, 2vw, 2rem)) {
    .hero-title {
        font-size: 56px;
    }
    
    .hero-brand {
        font-size: 52px;
    }
    
    @media (max-width: 768px) {
        .hero-title {
            font-size: 32px;
        }
        
        .hero-brand {
            font-size: 28px;
        }
    }
}

/* =============================================
   28. ASPECT-RATIO FALLBACK
   ============================================= */

@supports not (aspect-ratio: 16/9) {
    .video-container,
    .embed-container {
        position: relative;
        padding-bottom: 56.25%; /* 16:9 */
        height: 0;
        overflow: hidden;
    }
    
    .video-container iframe,
    .embed-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
}

/* =============================================
   29. WILL-CHANGE OPTIMIZATION
   Performans için
   ============================================= */

.hero-slide,
.project-item,
.team-member,
.hero-nav,
button,
.btn {
    will-change: transform, opacity;
}

/* =============================================
   30. TOUCH ACTION
   Mobile için dokunma davranışı
   ============================================= */

* {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
}

a, button, input, select, textarea {
    -ms-touch-action: manipulation;
    touch-action: manipulation;
}

/* =============================================
   INTERNET EXPLORER 11 POLYFILLS
   JavaScript ile çözülmesi gereken özellikler
   ============================================= */

/*
IE11 için aşağıdaki polyfill'ler gerekebilir:
1. CSS Variables: css-vars-ponyfill
2. Object-fit: object-fit-images
3. Smooth Scroll: smoothscroll-polyfill
4. IntersectionObserver: intersection-observer polyfill

Script tag olarak eklenebilir:
<script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
<script src="https://cdn.jsdelivr.net/npm/object-fit-images@3"></script>
<script src="https://cdn.jsdelivr.net/npm/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js"></script>
*/
